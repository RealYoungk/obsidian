> ìŠ¤í„°ë”” ì¢…ëª© í˜„ì¬ ìƒí™©ê³¼ ì„±ê³¼ ì¶”ì´

## ğŸ“Š ìŠ¤í„°ë”” ì¢…ëª© í˜„í™©

```dataviewjs
const studyStocks = dv.pages('#ìŠ¤í„°ë””ì¢…ëª©')
    .where(p => p.file.path.includes('1. ê¸°ì—…ë¶„ì„'))
    .sort(p => p.file.name);

if (!studyStocks || studyStocks.length === 0) {
    dv.paragraph("âš ï¸ ìŠ¤í„°ë”” ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤.");
} else {
    // ìµœì‹  ìŠ¤ëƒ…ìƒ· íŒŒì¼ ì°¾ê¸°
    const snapshotFiles = dv.pages('"0. ëŒ€ì‹œë³´ë“œ/ì£¼ê°€ìŠ¤ëƒ…ìƒ·"')
        .where(p => p.file.name.includes('ì£¼ê°€ìŠ¤ëƒ…ìƒ·_'))
        .sort(p => p.file.name, 'desc');
    
    if (snapshotFiles.length === 0) {
        dv.paragraph("âš ï¸ ìŠ¤ëƒ…ìƒ· ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
        return;
    }
    
    const latestSnapshot = snapshotFiles[0];
    const snapshotContent = await dv.io.load(latestSnapshot.file.path);
    
    // ìŠ¤í„°ë”” ì¢…ëª©ë§Œ í•„í„°ë§í•´ì„œ í…Œì´ë¸” ìƒì„±
    let table = [];
    
    for (let stock of studyStocks) {
        // ê¸°ë³¸ ì •ë³´ ì¶”ì¶œ
        const companyName = stock.file.name;
        const ticker = stock.ticker;
        const targetCap = stock.ëª©í‘œì‹œê°€ì´ì•¡ || 'N/A';
        const targetDate = stock.ëª©í‘œì‹œì  || 'N/A';
        
        // ìŠ¤ëƒ…ìƒ·ì—ì„œ í•´ë‹¹ ê¸°ì—… ì •ë³´ ì°¾ê¸°
        const companySection = snapshotContent.match(new RegExp(`## ${companyName}[\\s\\S]*?(?=## |$)`, 'g'));
        
        if (companySection && companySection[0]) {
            const section = companySection[0];
            
            // í˜„ì¬ê°€ ì¶”ì¶œ (â‚© ë˜ëŠ” $ í˜•íƒœ)
            const priceMatch = section.match(/\*\*í˜„ì¬ê°€\*\*:\s*([â‚©$][\d,$.()â‚©\s]+)/);
            const currentPrice = priceMatch ? priceMatch[1].trim() : 'N/A';
            
            // ì‹œê°€ì´ì•¡ ì¶”ì¶œ
            const marketCapMatch = section.match(/\*\*ì‹œê°€ì´ì•¡\*\*:\s*([^-\n]+)/);
            const marketCap = marketCapMatch ? marketCapMatch[1].trim() : 'N/A';
            
            // 1ë…„ ì„±ê³¼ ì¶”ì¶œ
            const yearMatch = section.match(/1ë…„:\s*([^â†’]+)\s*â†’\s*([^(]+)\s*\(([^)]+)\)/);
            const yearPerformance = yearMatch ? `${yearMatch[3]}` : 'N/A';
            
            // ìƒìŠ¹ ì—¬ë ¥ ê³„ì‚° (ëª©í‘œì‹œê°€ì´ì•¡ì´ ìˆëŠ” ê²½ìš°)
            let upside = 'N/A';
            if (targetCap !== 'N/A' && marketCap !== 'N/A') {
                try {
                    let currentCapNum, targetCapNum;
                    
                    if (marketCap.includes('ì¡°')) {
                        currentCapNum = parseFloat(marketCap.replace(/[ì¡°\s]/g, ''));
                    } else if (marketCap.includes('ì²œì–µ')) {
                        currentCapNum = parseFloat(marketCap.replace(/[ì²œì–µ\s]/g, '')) / 10;
                    } else if (marketCap.includes('$') && marketCap.includes('B')) {
                        currentCapNum = parseFloat(marketCap.replace(/[$B\s]/g, '')) * 1330 / 1000000;
                    } else if (marketCap.includes('$') && marketCap.includes('M')) {
                        currentCapNum = parseFloat(marketCap.replace(/[$M\s]/g, '')) * 1330 / 1000000000;
                    }
                    
                    if (targetCap.includes('ì¡°')) {
                        targetCapNum = parseFloat(targetCap.replace(/[ì¡°\s]/g, ''));
                    }
                    
                    if (currentCapNum && targetCapNum) {
                        const upsidePercent = ((targetCapNum - currentCapNum) / currentCapNum * 100).toFixed(1);
                        upside = `${upsidePercent}%`;
                    }
                } catch (e) {
                    upside = 'Error';
                }
            }
            
            table.push([
                `[[${companyName}]]`,
                ticker,
                currentPrice,
                marketCap,
                targetCap,
                targetDate,
                upside,
                yearPerformance
            ]);
        } else {
            // ìŠ¤ëƒ…ìƒ·ì— ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°
            table.push([
                `[[${companyName}]]`,
                ticker,
                'N/A',
                'N/A',
                targetCap,
                targetDate,
                'N/A',
                'N/A'
            ]);
        }
    }
    
    dv.table([
        "ê¸°ì—…ëª…", 
        "í‹°ì»¤", 
        "í˜„ì¬ê°€", 
        "ì‹œê°€ì´ì•¡",
        "ëª©í‘œì‹œê°€ì´ì•¡",
        "ëª©í‘œì‹œì ",
        "ìƒìŠ¹ì—¬ë ¥",
        "1ë…„ ì„±ê³¼"
    ], table);
    
    // ì—…ë°ì´íŠ¸ ì‹œê°„ í‘œì‹œ
    dv.paragraph(`*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: ${latestSnapshot.file.name.replace('ì£¼ê°€ìŠ¤ëƒ…ìƒ·_', '').replace('.md', '')}*`);
}
```

## ğŸ“ˆ ìŠ¤í„°ë”” ì¢…ëª© ì„±ê³¼ ë¶„ì„

```dataviewjs
// ìµœê·¼ ìŠ¤ëƒ…ìƒ·ë“¤ì„ ì´ìš©í•œ ì„±ê³¼ ë¶„ì„
const snapshotFiles = dv.pages('"0. ëŒ€ì‹œë³´ë“œ/ì£¼ê°€ìŠ¤ëƒ…ìƒ·"')
    .where(p => p.file.name.includes('ì£¼ê°€ìŠ¤ëƒ…ìƒ·_'))
    .sort(p => p.file.name, 'desc')
    .limit(5); // ìµœê·¼ 5ê°œ ìŠ¤ëƒ…ìƒ·

if (snapshotFiles.length > 0) {
    // ìŠ¤í„°ë”” ì¢…ëª© íƒœê·¸ê°€ ìˆëŠ” ê¸°ì—…ë“¤ ì¡°íšŒ
    const studyStocks = dv.pages('#ìŠ¤í„°ë””ì¢…ëª©')
        .where(p => p.file.path.includes('1. ê¸°ì—…ë¶„ì„'))
        .sort(p => p.file.name);
    
    dv.header(3, "ìµœê·¼ ì„±ê³¼ ìš”ì•½");
    
    for (let stock of studyStocks) {
        const stockName = stock.file.name;
        const latestSnapshot = snapshotFiles[0];
        const content = await dv.io.load(latestSnapshot.file.path);
        
        const companySection = content.match(new RegExp(`## ${stockName}[\\s\\S]*?(?=## |$)`, 'g'));
        
        if (companySection && companySection[0]) {
            const section = companySection[0];
            
            // ê° ê¸°ê°„ë³„ ì„±ê³¼ ì¶”ì¶œ
            const weekMatch = section.match(/1ì£¼ì¼:[^(]*\(([^)]+)\)/);
            const monthMatch = section.match(/1ê°œì›”:[^(]*\(([^)]+)\)/);
            const sixMonthMatch = section.match(/6ê°œì›”:[^(]*\(([^)]+)\)/);
            const yearMatch = section.match(/1ë…„:[^(]*\(([^)]+)\)/);
            
            dv.paragraph(`**${stockName}**: 1ì£¼ì¼ ${weekMatch?.[1] || 'N/A'} | 1ê°œì›” ${monthMatch?.[1] || 'N/A'} | 6ê°œì›” ${sixMonthMatch?.[1] || 'N/A'} | 1ë…„ ${yearMatch?.[1] || 'N/A'}`);
        }
    }
} else {
    dv.paragraph("âš ï¸ ìŠ¤ëƒ…ìƒ· ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");
}
```

---
*ìŠ¤í„°ë”” ì¢…ëª©: ì§‘ì¤‘ ì—°êµ¬ ë° íˆ¬ì ê²€í†  ëŒ€ìƒ ì¢…ëª©ë“¤*